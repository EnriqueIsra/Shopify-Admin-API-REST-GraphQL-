<mat-card>

    <mat-card-title>Crear producto (GraphQL)</mat-card-title>

    <!-- Loader -->
    @if (loading) {
    <div style="text-align:center; margin: 20px 0;">
        <mat-spinner></mat-spinner>
    </div>
    }

    <!-- Error -->
    @if (error) {
    <div style="color: red; margin-top: 10px;">
        {{ error }}
    </div>
    }

    <!-- FORMULARIO -->
    @if (!loading) {

    <form [formGroup]="form" (ngSubmit)="submit()" style="margin-top:20px;">

        <!-- TÍTULO -->
        <mat-form-field appearance="outline" style="width:100%; margin-bottom:12px;">
            <mat-label>Título</mat-label>
            <input matInput formControlName="title" />

            @if (form.get('title')?.invalid && form.get('title')?.touched) {
            <mat-error>El título es obligatorio</mat-error>
            }
        </mat-form-field>

        <!-- DESCRIPCIÓN -->
        <mat-form-field appearance="outline" style="width:100%; margin-bottom:12px;">
            <mat-label>Descripción HTML</mat-label>
            <textarea matInput formControlName="descriptionHtml" rows="5"></textarea>
        </mat-form-field>

        <!-- PRECIO -->
        <mat-form-field appearance="outline" style="width:100%; margin-bottom:12px;">
            <mat-label>Precio</mat-label>
            <input matInput type="number" formControlName="price" step="0.01" />

            @if (form.get('price')?.invalid && form.get('price')?.touched) {
            <mat-error>Ingrese un precio válido (ej. 199.00)</mat-error>
            }
        </mat-form-field>


        <!-- BOTONES -->
        <div style="display:flex; gap:10px; margin-top:15px;">

            <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || loading">
                Guardar
            </button>

            <button mat-button color="warn" type="button" (click)="cancel()">
                Cancelar
            </button>

        </div>

    </form>

    }

</mat-card>